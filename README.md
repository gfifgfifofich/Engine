## Build

```bash
mkdir build
cd build
cmake ../
cmake --build ./
```

## Features
Every aspect of engine is either a class (cube, texture, scene, sound...) or a function (DrawTexture(), DrawMaterial()...), nothing is "hidden" in the engine.
All functions and classes can be seen in Cmake/Source/engine/Components/Include like UI.h, Drawing.h ect.
### Drawing
Drawing functions can be used at any point of execution, the only exception is multitheading.
When color gets higher than 1.0f, it gets affected by bloom (glow effect). 
Drawing, as any other feature does not require any steup or deletion after use, Calling function - drawing, stopped calling the function - not drawing. Simple.
Height maps with notmalmaps give a full 3d lighting in a 2d scenes. they can be drawn separatly, like DrawNormalMap(), or much more efficiently with Materials 
example
```cpp
void Process(float dt)
{
    //Draw white circle at mouse position
    DrawCircle(MousePosition, 10.0f);

    // Draw circle with stock circle notmalmap
    DrawCircle({-200.0f,0.0f}, 100.0f,{1.0f,1.0f,1.0f,1.0f},true);

    // Draw light sphere from mouse
    DrawLight(MousePosition,{1000.0f,1000.0f},{1.0f,1.0f,1.0f,1.0f});

    Material m;
    m.Texture = FlatColorCircleTexture; // autogenerated texture
    // normalmaps and heightmaps are giving the 3d lightng in a 2d scenes
    m.NormalMap = CubeNormalMapTexture; // another autogenerated texture
    //Draw a red glowing cube with texture

    DrawQuadWithMaterial({0.0f,0.0f},{100.0f,100.0f},m,0.0f,{10.0f,0.0f,0.0f,1.0f});
}
```
Result:

![github3](https://github.com/gfifgfifofich/Engine/blob/main/Cmake/resources/Textures/swappy-20240724_122151.png)

Also there are Windows. They are the only thing that is "hidden in the engine", and can be accessed by IDs.
```cpp
unsigned int ExampleWindow; 
void Ready()
{
    
    // create a window
    ExampleWindow = CreateWindow();
    // get a temporary pointer to it
    Window* w = GetWindow(ExampleWindow);

    // Init window with size
    w->Init({800,600});
    //active windows have input, inactive windows inputs are 0.0f, or false
    //this will stop window from going inactive when mouse isnt howering over it.
    w->AutoActive = false;
    w->Autoclear = false;
    w->AutoDraw = false;


}

void Process(float dt)
{
    // This will change everything in engine, like mouseposition, keyboardinputs, ect.
    // Every Draw after this will go to this window 
    UseWindow(ExampleWindow);

    // Drawing functions...

    EndOfWindow();

    //get window
    Window* w = GetWindow(ExampleWindow);
    // Draw everything that is inside this window manually
    // this function called automatically every frame if  w->AutoDraw == true;
    w->_Draw();
    // Clear window with color
    // again called automatically if w->Autoclear == true, sets color to w->backgroundColor
    w->Clear({0.0f,0.0f,0.0f,1.0f});
    // Set position to mouse position for fun
    w->Position = MousePosition;
    // change scale (render will happen at inited size, but Draw() will make it smaller)
    w->Scale = {0.5f,0.5f};
    // Draw window to screen or other window
    w->Draw();
}
```
### UserInterface
UI works the same way as drawing. every function that starts with "UI_" draws to screen space, and is not affected by CameraScale or CameraPosition.
Example UI_DrawCircle() or UI_DrawQuadWithMaterial. 
there are functions to make actual user interface, like UI_Button, UI_Slider, UI_TextBox, ect.
And as every part of engine, nothing requeres setup, freing memory or anything else, Calling function - button exists, stoppen calling it - button disapears
Redactor was made using this stuff and Windows, so here is a preview. source https://github.com/gfifgfifofich/Engine/blob/main/Cmake/Source/engine/Components/Redactor.h

###Scenes and redactor.
Check the redactor.cpp and ECS.H to see how it works,
redactor.cpp is the main UI of the engine, it runs everything that is on cpu, Engine.cpp does everything that is GPU related.
Redactor preview: 
![github3](https://github.com/gfifgfifofich/Engine/blob/main/Cmake/resources/Textures/Redactor%20preview%20.png)

### Physics
There are 3 types of objects: Balls, Cubes and Polygons.
Calling a Process(delta) function will update forces, position and velocity of object.
For collisions there are many functions like ball to ball colission BTBCollision(ball* a, ball* b) or even BallToStaticQuadCollision(ball* a, cube b)
Also there are Struts, ropes, and springs. 

```cpp
ball b1;
ball b2;
cube c;

// object for creating a rope visually 
DecorativeRope dr;
void Ready()
{
    c.width = 300.0f;
    c.height = 100.0f;
    c.position = {0.0f,-100.0f};

    b1.position = {0.0f, 0.0f};
    b1.r = 10.0f;
    b1.mass = 1.0f;

    b2.position = {1.0f, 100.0f};
    b2.r = 5.0f;
    b2.mass = 5.0f;
    
    dr.Init(&b1,&b2,100.0f);
}

void Process(float dt)
{
    // add gravity to first ball
    b2.Force.y = -100.0f;

    //Collide balls
    BtBCollision(&b1,&b2);

    // collide balls with the quad, leave quad static
    BallToStaticQuadCollision(&b1,c);
    BallToStaticQuadCollision(&b2,c);

    //Make a rope between balls
    Rope(&b1,&b2,100.0f);

    b1.Process(dt);
    b2.Process(dt);
    dr.Process(dt);

    // Drawing functions can take some objects directly
    DrawCircle(b1);
    DrawCircle(b2);
    DrawCube(c);

    //Draw decorative rope
    dr.Draw();
}
```
Again, no need for setups or freing memory, calling function - collisions/physics happens, stopped calling function - collision/physics no longer processed
### Audio
Audio works almost the same way as drawing.
The problem with sound system was that OpenAL supports only a certain amount of soundSources per device (most of the time its 255). But when i was making one project, where there are few thousands of parts and each of them was making a sound, it was became a problem.
For this to be not a problem i implemented sound pools - an amount of sources that play one sound when needed. When there are more instances of sound that there are sources in sound pool, it will move some of them between instances and combine volume, averege pith and other parameters. This will slightly decreese sound quality than raw sources, but supports Unlimited amount of sources.
This system was compacted into a few simple calls. Load sound from .wav file, addsound() to create a pool of this sound (there are different pools for looping sounds and one time sounds), and then, when its needed, just playsound() with needed pitch, position, volume ect. All the source management will be processed automatically.
```cpp
unsigned int Sound;
void Ready()
{
    //load sound from file (right now supported only .wav)
    Sound = LoadSound("path/to/sound.wav");   
    //add sound source pool
    addsound(Sound,false,10);
 }

void Process(float dt)
{
    // play ine sound from this position
    // for sounds to work properly in stereo, Sound should be Mono.
    playsound(Sound,MousePosition);
 }
```


### Misc
Other stuff that this engine has.

#### Particles
ParticleEmmiter class (Should be renamed to just particles sometime).
Set its material, set its mode with a string(will change to enum sometime), make other setup, like lifetime of particles, startsize, endsize, etc.
than at any point of time you can call one of the Spawn functions of this particles, and this is a particle system. Drawing works multithreaded here. and dont forget to Process(dt) somewhere.
simple particle simulation 
![github3](https://github.com/gfifgfifofich/Engine/blob/main/VS%20project/opengltry2/Textures/Cool%20picture.png)


#### Neural Networks
There are a simple NeuralNetwork class with easy setup for simulations and games. check its headerfile to see more. its highly optimized (whole neural network is cramped into 2 c arrays, and it is easily runnable in multithreading).



## libraries
[Dear imgui](https://github.com/ocornut/imgui), 
[GLM](https://github.com/g-truc/glm), 
[GLFW](https://github.com/glfw/glfw), 
[glew](https://glew.sourceforge.net/), 
[glad](https://github.com/Dav1dde/glad), 
[freetype](https://freetype.org/download.html), 
[OpenAL](https://github.com/kcat/openal-soft), 
[stb_image](https://github.com/nothings/stb/blob/master/stb_image.h), 

	

